<!-- Modal Overlay -->
<div class="fixed inset-0 flex items-center justify-center bg-black/80 z-50">
  <div class="bg-white rounded-xl shadow-xl w-4/5 max-w-5xl max-h-[90vh] flex flex-col">
    
    <!-- Header -->
    <div class="bg-sky-600 text-white p-2 rounded-t-xl flex justify-between items-center">
      <h2 class="text-xl font-bold text-white ml-2">
        <fa-icon [icon]="faCheckCircle" class="mr-2"></fa-icon>
        XÁC NHẬN THÔNG TIN LỊCH HẸN
      </h2>
      <button
        (click)="onClose()"
        class="text-white bg-transparent hover:bg-red-500 rounded-full p-1 flex items-center justify-center mr-2"
        style="width: 35px; height: 35px;">
        <fa-icon [icon]="faXmark" class="text-lg"></fa-icon>
      </button>
    </div>

    <!-- Content -->
    <div class="p-6 overflow-y-auto">
      
      <!-- Thông báo lưu ý -->
      <!-- <div class="bg-yellow-50 p-4 border border-orange-300 rounded-md mb-6">
        <div class="text-sm text-orange-700 text-justify">
          <fa-icon [icon]="faInfoCircle"></fa-icon> Xin vui lòng kiểm tra kỹ thông tin trước khi hoàn tất đặt lịch!
        </div>
      </div> -->

      <!-- Nội dung: Hồ sơ và Thông tin đặt khám -->
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
        
        <!-- HỒ SƠ BỆNH NHÂN -->
        <div class="bg-white rounded-lg overflow-hidden border border-sky-600">
          <!-- Tiêu đề -->
          <div class="text-xl font-bold text-white bg-sky-600 px-4 py-2">
            <fa-icon [icon]="faUserMd" class="mr-2"></fa-icon>
            HỒ SƠ BỆNH NHÂN
          </div>
        
          <!-- Nội dung -->
          <div class="grid grid-cols-1 gap-2 p-4" *ngIf="patient">
            <div class="grid [grid-template-columns:4fr_6fr] gap-2">
              <p class="font-semibold">Mã hồ sơ:</p>
              <p>{{ patient.id || '...' }}</p>
            </div>
            <div class="grid [grid-template-columns:4fr_6fr] gap-2">
              <p class="font-semibold">Họ tên:</p>
              <p class="text-sky-800 font-semibold">{{ patient.fullName || '...' }}</p>
            </div>
            <div class="grid [grid-template-columns:4fr_6fr] gap-2">
              <p class="font-semibold">Giới tính:</p>
              <p>{{ patient.gender || '...' }}</p>
            </div>
            <div class="grid [grid-template-columns:4fr_6fr] gap-2">
              <p class="font-semibold">Ngày sinh:</p>
              <p>{{ formatDate(patient.dateOfBirth || '') || '...' }}</p>
            </div>
            <div class="grid [grid-template-columns:4fr_6fr] gap-2">
              <p class="font-semibold">Số điện thoại:</p>
              <p>{{ formatPhone(patient.phoneNumber || '') || '...' }}</p>
            </div>
            <div class="grid [grid-template-columns:4fr_6fr] gap-2">
              <p class="font-semibold">Số căn cước:</p>
              <p>{{ formatNationalId(patient.identityCard || '') || '...' }}</p>
            </div>
            <div class="grid [grid-template-columns:4fr_6fr] gap-2">
              <p class="font-semibold">Số thẻ BHYT:</p>
              <p>{{ formatInsuranceId(patient.insuranceId || '') || '...' }}</p>
            </div>
            <div class="grid [grid-template-columns:4fr_6fr] gap-2">
              <p class="font-semibold">Địa chỉ:</p>
              <p>{{ patient.address || '...' }}</p>
            </div>
          </div>
        </div>
        
        <!-- THÔNG TIN ĐẶT KHÁM -->
        <div class="bg-white rounded-lg overflow-hidden border border-sky-600">
          <div class="text-xl font-bold text-white bg-sky-600 p-4 pt-2 pb-2">
            <fa-icon [icon]="faStethoscope" class="mr-2"></fa-icon>
            THÔNG TIN LỊCH HẸN
          </div>
          <div class="grid grid-cols-1 gap-2 p-4">
            <div class="grid [grid-template-columns:4fr_6fr] gap-2">
              <p class="font-semibold">Bác sĩ:</p>
              <p class="text-sky-800 font-semibold">{{ selectedDoctor?.name || '...' }}</p>
            </div>
            <!-- <div class="grid [grid-template-columns:4fr_6fr] gap-2">
              <p class="font-semibold">Chuyên môn:</p>
              <p class="text-purple-700 font-medium">{{ selectedDoctor?.nameOfServiceCategory || '...' }}</p>
            </div> -->
            <div class="grid [grid-template-columns:4fr_6fr] gap-2">
              <p class="font-semibold">Dịch vụ:</p>
              <p class="text-green-800 font-semibold">{{ selectedDoctorService?.serviceResponse?.serviceName || '...' }}</p>
            </div>
            <div class="grid [grid-template-columns:4fr_6fr] gap-2">
              <p class="font-semibold">Ngày khám:</p>
              <p class="text-amber-700 font-semibold">{{ getVietnameseDayName(selectedDate || '') }} - {{ formatDate(selectedDate || '') || '...' }}</p>
            </div>
            <div class="grid [grid-template-columns:4fr_6fr] gap-2">
              <p class="font-semibold">Khung giờ:</p>
              <p class="text-cyan-700 font-semibold">{{ selectedDoctorSchedule?.timeFrameResponse?.fullName || '...' }}</p>
            </div>
            <div class="grid [grid-template-columns:4fr_6fr] gap-2">
              <p class="font-semibold">Phí khám bệnh:</p>
              <p class="text-orange-700 font-semibold">{{ selectedDoctorService?.serviceResponse?.price || '...' }}</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Thông báo lưu ý -->
      <div class="bg-sky-50 p-4 border border-sky-300 rounded-md mt-6">
        <div class="text-sm text-gray-600 text-justify">
          <b><fa-icon [icon]="faInfoCircle"></fa-icon> Lưu ý về lịch hẹn khám:</b>
          <ul class="list-disc pl-5 mt-2 space-y-1">
            <li>Lịch hẹn chỉ có hiệu lực sau khi được phòng khám xác nhận.</li>
            <li>Nếu bạn cần huỷ hoặc thay đổi lịch hẹn, vui lòng thông báo trước ít nhất 2 giờ.</li>
            <li>Phí khám bệnh không bao gồm tiền thuốc và các khoản phụ thu khác.</li>
            <li>Trong trường hợp bác sĩ bận đột xuất, phòng khám sẽ chủ động liên hệ với bạn để sắp xếp lại lịch.</li>
            <li>Khi đến khám, vui lòng mang theo thẻ căn cước để xác nhận thông tin.</li>
            <li>Vui lòng đến đúng giờ theo khung giờ hẹn để được ưu tiên làm thủ tục khám.</li>
          </ul>
        </div>
      </div>

      <!-- Action buttons -->
      <div class="flex justify-end gap-4 mt-6">
        <button
          (click)="onClose()"
          class="px-6 py-2 bg-white text-sky-600 border border-sky-600 font-semibold rounded-lg hover:bg-sky-50">
          Quay lại
        </button>
        <button
          (click)="onConfirm()"
          class="px-6 py-2 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700">
          <fa-icon [icon]="faCheckCircle" class="mr-2"></fa-icon>
          Xác nhận đặt lịch
        </button>
      </div>

    </div>
  </div>
</div>
